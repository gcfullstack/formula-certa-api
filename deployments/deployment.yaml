apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-example
spec:
  replicas: 3
  selector:
    matchLabels:
      run: api-example
  template:
    metadata:
        labels:
          run: api-example
    spec:
      containers:
        - name: api-example
          image: srv-docker.sfa.local:5000/api-example:development
          ports:
          - containerPort: 8080
          volumeMounts:
          - name: sfa-fs-app
            mountPath: /mnt/sfa-fs-app
      volumes:
      - name: sfa-fs-app
        flexVolume:
          driver: "fstab/cifs"
          fsType: "cifs"
          secretRef:
            name: "cifs-secretsfaapp"
          options:
            networkPath: "//bdsfa/sfa-fs-app"
            mountOptions: "dir_mode=0755,file_mode=0644,noperm"
